# Forest대난투
## 프로젝트 개요
메타버스 아카데미 3차 프로젝트로 포톤을 활용한 크로스플랫폼 멀티플레이 대난투 게임을 제작
## 작업 내용
- 기본 캐릭터 이동,점프 등 기본기능 구현
- 기본 기능에 대한 멀티플레이 연동 구현
- 각 캐릭터 별 스킬들 구현
- 각 스킬들 이펙트,체력 등 수치들 각 로컬에 동기화
- 맵 시스템,게임 오버,카메라 무빙 등 게임 기본 시스템 제작
## 핵심 스크립트
1. GameManager
- 싱글톤 패턴으로 게임 전체를 총괄해주는 메니저
- 각 씬별로 필요한 작업들을 명시하여 해당 씬이 되었을 때 해당 작업이 이루어지도록 설정
2. PlayerMove_HJH
- 모든 캐릭터들의 기본 기능과 이후에 구현해야 할 기능을 명시해놓은 스크립트
- 각 플랫폼에 따른 다른 조작방식 명시
- 각 플레이어 상태 관리 및 기능 조작 담당
3. PlayerWarrior_HJH 등 플레이어블 캐릭터 스크립트
- 각 캐릭터들에 대한 스킬,대쉬,커멘드 등의 구현
- 각 캐릭터들이 스킬을 사용할 때 다른 클라이언트에서도 이펙트 등이 생성되도록 포톤의 PunRPC를 활용하여 동기화 구현
4. MapChoice_HJH,LifeToggle_HJH,GameLobbyPlayer_HJH 등
- 서로 같은 방에 들어온 이후 게임 시작을 위한 UI 동기화
- 각자의 캐릭터 선택,방장의 맵이나 목숨 선택 등이 UI가 동기화 되어서 게임 설정 가능하도록
## 회고
- 최초로 만들어본 멀티플레이,크로스플랫폼 게임이다.
- 싱글 플레이 게임에 비해서 멀티플레이 게임이 훨씬 난이도가 높다는 것을 깨달았다.
- 특히 테스트 해보는게 참 어려웠는데, 처음에는 빌드해서 하나 접속하고 에디터로 하나 접속하고 이런 방식으로 하다가 ParrelSync 라는 에셋을 발견해서 에디터 여러개 띄워서 테스트 하는 방식으로 발전했다.
- 멀티플레이 개발의 사고방식을 체화할 수 있는 좋은 프로젝트였다.
- 전처리문을 활용해서 크로스 플랫폼을 구현했다.
- 시연할 때 4명을 섭외헤서 4인 대결을 하며, 유튜브 라이브로 생중계를 했었는데 지금 생각해보면 너무 과한 퍼포먼스적 발표였던 것 같다.
- 최초로 상속 개념을 적용해서 개발했다.
- 맨땅에 해딩으로 개발하다가, 점점 OOP 등의 개념들이 잡혀가고 있는 시기였다.
- 지금 다시 코드를 살펴보면 인수로 전달하면 합칠 수 있는 함수들이 많이 보이는데, 이때에는 그냥 함수를 여러개 복사 붙여넣기 하는 방식으로 작업했던 것 같다.
- 캐릭터 애니메이션을 관리하는데에 있어서 공을 많이 들였다. 최초에는 각 인수들을 계속 Rpc로 쏴서 애니메이션 동기화 하다가 나중에 찾아보니 photon animation view 라는 것이 있어서 그걸 기반으로 동기화 했다. transform도 마찬가지로 photon view를 사용했다.
