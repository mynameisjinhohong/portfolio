# Universe
## 프로젝트 개요
메타버스 아카데미 최종프로젝트로 대학생들을 위한 메타버스 플랫폼. Universe 제작.  
XR-2,Ai-1,네트워크-1,컨텐츠 창작자-2 로 이루어진 팀구성  
## 작업 내용
- 네트워크 측과의 통신 전담
- 맵 에디터 기능(타일깔기,배경음악설정,레이어관리,오브젝트업로드(2D,3D 모두),포탈,화상통화영역 설정 등등) 제작
- 맵 에디터로 제작한 맵을 json으로 서버에 전달, 이후 맵을 불러올 때 해당 데이터를 받아서 다시 유니티 씬 상에서 구축
- Agora SDK를 활용하여 실시간 화상 및 음성통화 기능 구현
- 보안을 위하여 RailWay 호스팅 서비스를 활용해 토큰 배포 웹서버 구축
- 회원가입,로그인 등 기능 구현
- 케릭터와 오브젝트 상호작용,이동,이모지 등 기본적인 캐릭터 기능 구현
## 핵심 스크립트
1. MakeMapManager_H,MapEditorTmp,FileManager_L
- 맵 생성 스크립트
- 사용자가 맵을 생성을 원하면 어떠한 프리셋으로 제작할지 결정하고, 리소스 폴더에서 해당 프리셋 맵의 데이터를 가져와서(그 사이에 ai 검사 등을 거치고) 서버에 업로드
- 서버에 업로드 된 후, 맵 에디터 씬으로 넘어가서 MapEditorTmp 작동
- 맵 에디터 씬에서는 맵을 수정할 때에 필요한 각 기능들을 명시
- 3D 오브젝트를 임포트 할때에는 OBJImporter 에셋을 활용하여 임포트 하고 텍스처는 따로 이미지 파일을 입력받아서 입혀주는 방식.
- 이후에 FileManager_L을 통해서 맵 데이터가 수정된 사항들을 다시 서버에 보내준다.
2. RtmManager_H,FaceChatCanvas_H,NewBehaviorScript
- Agora SDK와 통신하는 스크립트
- 원래 테스트 용으로 만들었던 NewBehaviorScript를 막상 넣어서 해보니 잘 작동해서 그냥 계속 쓰게 되었다.
- Railway를 활용하여 호스팅한 토큰 서버와 통신을 해서 토큰을 발급받고, Agora SDK 의 API를 활용하여 화상채팅 영역에 들어왔을 경우 화상채팅 서버 연결
- 화상 채팅 뿐만 아니라 화면 공유 가능. 특정 대상의 화면 타게팅 가능(줌과 같이)
3. FileManager_H,ChangeInput_H,ChangeAvatar_H 등등
- 로그인,회원가입 UI 제작
- 회원가입 시 저장된 데이터들을 서버에 보내서 응답을 받고 처리
- 회원가입이 완료되면, 로그인 시 해당 데이터들을 서버에서 받아와서 마이페이지 UI 구성
- 마이페이지에서 아바타 변경 시 서버에 아바타 세팅 전송
- 포톤으로 방 입장할 때, 아바타 데이터 셋을 전송해서 서로가 보는 아바타가 같도록 구성
4. CharacterMove_H,Press_H 등등
- 캐릭터 이동 및 상호작용 기능 구현
- 포탈이나 외부링크 연결된 타일에서 F 를 누르면 해당 기능 작동
- 숫자키패드로 이모티콘 사용 가능
5. FindSimilarImage_H,FindPeople_H 등등
- 기본 맵에 제공되어 있는 여러 기능들 구현
- 서로 공유 가능한 포스트잇,친구 추천 기능,일정관리 달력,뉴스 가판대,과대 챗봇 등등 기능 구현
## 회고
- 굉장히 치열하게 작업했던 프로젝트였다.
- 2달 정도 하루종일 야근하면서 작업하였는데 다른 팀들도 다들 열심히 한 만큼 수상하지는 못했지만, 그래도 꽤나 실력도 많이 늘고 만족스러운 결과가 나온 작품이었던 것 같다.
- 짧은 발표시간에 보여주기에는 워낙 다양한 기능들을 제작하기도 했고, 제작에 비해서 발표에 신경을 못써서 수상 못했다고 생각한다.
- 케릭터들,채팅 동기화는 포톤, 데이터 동기화는 UnityWebRequest, 화상,음성채팅은 Agora SDK를 사용하는 등. 네트워킹에 대해서 다양한 경험을 해볼 수 있었던 것 같다.
- 특히 화상채팅 구현할 때,Agora SDK를 블로그 같은거 보면서 따라했더니 안되어서. 결국 공식문서에 들어가서 하나하나 읽으면서 개념 이해하고 방법을 찾으면서 진행했는데 이 경험이 이후에도 많이 도움이 되었던 것 같다.
- 우리가 맵을 구축하는데에 있어서 필요한 DTO를 설정하고 해당 규칙에 따라서 소통하는 것도 새로운 경험이라 흥미로웠다.
- 솔직히 조금만 더 고도화했으면, 상품성도 있었을 것 같은데 수상하지 못해서 다들 의욕이 꺾인 것이 아쉬웠다.
- 그리고 AI 팀의 진도가 우리가 원하는 만큼 나가질 못해서 몇몇 기능들을 그냥 야매로 때웠는데, 이것도 아쉬운 부분이다.
